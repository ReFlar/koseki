module.exports=function(t){var s={};function a(o){if(s[o])return s[o].exports;var e=s[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,a),e.l=!0,e.exports}return a.m=t,a.c=s,a.d=function(t,s,o){a.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,s){if(1&s&&(t=a(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)a.d(o,e,function(s){return t[s]}.bind(null,e));return o},a.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(s,"a",s),s},a.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},a.p="",a(a.s=21)}([function(t,s,a){"use strict";function o(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s}a.d(s,"a",function(){return o})},function(t,s){t.exports=flarum.core.compat.Component},function(t,s){t.exports=flarum.core.compat.Model},function(t,s){t.exports=flarum.core.compat["tags/models/Tag"]},,function(t,s){t.exports=flarum.core.compat["components/Page"]},function(t,s){t.exports=flarum.core.compat["tags/utils/sortTags"]},function(t,s){t.exports=flarum.core.compat["helpers/username"]},function(t,s){t.exports=flarum.core.compat["components/IndexPage"]},,function(t,s){t.exports=flarum.core.compat["helpers/listItems"]},function(t,s){t.exports=flarum.core.compat["helpers/avatar"]},function(t,s){t.exports=flarum.core.compat["helpers/humanTime"]},function(t,s){t.exports=flarum.core.compat["utils/stringToColor"]},function(t,s){t.exports=flarum.core.compat["utils/computed"]},,,,,,,function(t,s,a){"use strict";a.r(s);var o=a(0),e=a(5),r=a.n(e),l=a(6),i=a.n(l),n=a(8),c=a.n(n),p=a(10),u=a.n(p),f=a(1),d=a.n(f),g=a(11),v=a.n(g),h=a(7),y=a.n(h),T=a(12),k=a.n(T),b=a(13),C=a.n(b),x=a(14),w=a.n(x),N=function(t){function s(){return t.apply(this,arguments)||this}Object(o.a)(s,t);var a=s.prototype;return a.init=function(){t.prototype.init.call(this)},a.view=function(){var t=this.props.tag,s=t.lastPostedDiscussion();if(null!=t.lastUser()){var a={username:m.prop(t.lastUser().username),avatarUrl:null!=t.lastUser().avatarUrl?m.prop(t.lastUser().avatarUrl):m.prop(),color:w()("username","avatarUrl","avatarColor",function(t,s,a){return a?"rgb("+a.join(", ")+")":s?(this.calculateAvatarColor(),""):"#"+C()(t)})};return m("div",{className:"TagChild-last"},m("div",{className:"TagChild-avatar"},v()(a)," "," "),m("div",{className:"TagChild-lastmeta"},m("a",{href:app.route.discussion(s,s.lastPostNumber()),className:"TagChild-discussion"},s.title()),app.translator.trans("reflar-koseki.forum.by")," ",m("a",{href:app.route.user(a),config:m.route},y()(a)),m("br",null),m("small",null,k()(s.lastTime()))))}return m("div",null)},s}(d.a),_=function(t){function s(){return t.apply(this,arguments)||this}Object(o.a)(s,t);var a=s.prototype;return a.init=function(){t.prototype.init.call(this)},a.view=function(){var t=this.props.tag,s=app.forum.attribute("kosekiTagsView");return m("div",{class:"row TagChild-row"},m("div",{class:"col-xs-8 col-lg-7"},m("div",{class:"row"},m("div",{class:"col-xs-2",style:"bottom: 4px"},t.icon()?m("div",{className:"TagChild-image"},m("i",{class:t.icon()+" icon"})):""),m("div",{class:"col-xs-9"},m("a",{href:app.route("tag",{tags:t.slug()}),className:"TagChild-title"},t.name()),m("p",null,t.description())))),"compact"==s?m("div",null,m("div",{class:"col-xs-2 col-lg-2"},m("span",{className:"TagChild-topics"},t.discussionCount()+" "+app.translator.transChoice("reflar-koseki.forum.topics",t.discussionsCount(),{count:t.discussionsCount()})),m("span",{className:"TagChild-posts"},t.commentsCount()+" "+app.translator.transChoice("reflar-koseki.forum.posts",0==t.commentsCount()?0:t.commentsCount(),{count:0==t.commentsCount()?0:t.commentsCount()})))):m("div",null,m("div",{class:"col-xs-2 col-lg-1"},m("span",{class:"TagChild-topics"},t.discussionCount())),m("div",{class:"col-xs-2 col-lg-1"},m("span",{class:"TagChild-posts"},t.commentsCount()))),m("div",{class:"visible-lg col-lg-2"},N.component({tag:t})))},s}(d.a),P=function(t){function s(){return t.apply(this,arguments)||this}Object(o.a)(s,t);var a=s.prototype;return a.init=function(){var s=this;t.prototype.init.call(this),this.tags=i()(app.store.all("tags").filter(function(t){return t.parent()==s.props.tag}))},a.toggleView=function(){var t=this.parentNode.parentNode.parentNode.parentNode.parentNode.querySelectorAll(".Category--Children")[0];t&&("none"==t.style.display?(this.classList.remove("fa-angle-left"),this.classList.add("fa-angle-down")):(this.classList.remove("fa-angle-down"),this.classList.add("fa-angle-left")),t.style.display="none"==t.style.display?"block":"none")},a.view=function(){var t=this.props.tag,s=app.forum.attribute("kosekiTagsView");return m("div",{class:"container"},m("div",{class:"Category TagTile"},t.isPrimary()&&0==t.isChild()&&this.tags.length>=1?m("div",{class:"row"},m("div",{class:"row TagTile-info"},m("div",{class:"col-xs-8 col-lg-7"},m("a",{href:app.route("tag",{tags:t.slug()})},t.name())),"compact"==s?m("div",null,m("div",{class:"col-xs-2 col-lg-2"},m("span",{class:"TagTile-posts"},app.translator.trans("reflar-koseki.forum.statistics")))):m("div",null,m("div",{class:"col-xs-2 col-lg-1"},m("span",{class:"TagTile-topics"},app.translator.trans("reflar-koseki.forum.topics_title"))),m("div",{class:"col-xs-2 col-lg-1"},m("span",{class:"TagTile-posts"},app.translator.trans("reflar-koseki.forum.posts_title")))),m("div",{class:"col-xs-2 col-lg-2 visible-lg"},m("span",{class:"TagTile-last"},app.translator.trans("reflar-koseki.forum.last_post"))),m("div",{class:"visible-lg col-lg-1"},m("div",{class:"TagTile-toggle"},m("i",{class:"icon fa fa-angle-down",onclick:this.toggleView}))))):"",m("div",{class:"Category--Children"},t.isPrimary()&&0==t.isChild()&&this.tags.length>=1&&""!=t.description()?m("p",{class:"TagTile-description"},t.description()):"",this.tags.map(function(t){return _.component({tag:t})}))))},s}(d.a),j=function(t){function s(){return t.apply(this,arguments)||this}Object(o.a)(s,t);var a=s.prototype;return a.init=function(){t.prototype.init.call(this)},a.view=function(){var t={displayName:m.prop(app.forum.attribute("lastUser")),username:m.prop(app.forum.attribute("lastUser"))};return m("div",null,m("div",{class:"TagTile-info row"},m("div",{class:"col-xs-8 col-lg-7"},app.translator.trans("reflar-koseki.forum.whats_on"))),m("div",{class:"row"},m("div",{class:"col-xs-3 col-lg-1"},m("i",{class:"fa fa-bar-chart icon TagStatsIcon"})),m("div",{class:"col-xs-9 col-lg-10 TagTile"},m("p",{class:"TagTile-description"},m("h4",null,app.translator.trans("reflar-koseki.forum.forum_stats")),app.translator.trans("reflar-koseki.forum.topics_title"),": ",m("strong",null,app.forum.attribute("discussionsCount"))," /   ",app.translator.trans("reflar-koseki.forum.posts_title"),":  ",m("strong",null,app.forum.attribute("postsCount"))," /   ",app.translator.trans("reflar-koseki.forum.members"),":  ",m("strong",null,app.forum.attribute("usersCount")),m("br",null),app.translator.trans("reflar-koseki.forum.welcome_members"),":  ",m("a",{href:app.route.user(t),config:m.route},m("strong",null,y()(t)))))))},s}(d.a),O=function(t){function s(){return t.apply(this,arguments)||this}Object(o.a)(s,t);var a=s.prototype;return a.init=function(){t.prototype.init.call(this),this.tags=i()(app.store.all("tags").filter(function(t){return 0==t.isChild()})),this.secondary=i()(app.store.all("tags").filter(function(t){return 0==t.hasChild()&&0==t.isChild()}))},a.toggleView=function(){var t=this.parentNode.parentNode.parentNode.parentNode.querySelectorAll(".Category--Children")[0];t&&("none"==t.style.display?(this.classList.remove("fa-angle-left"),this.classList.add("fa-angle-down")):(this.classList.remove("fa-angle-down"),this.classList.add("fa-angle-left")),t.style.display="none"==t.style.display?"block":"none")},a.view=function(){var t=app.forum.attribute("kosekiTagsView"),s=app.forum.attribute("kosekiStatistics");return m("div",{className:"KosekiPage"},c.a.prototype.hero(),m("div",{className:"container"},m("nav",{className:"KosekiPage-nav IndexPage-nav sideNav",config:c.a.prototype.affixSidebar},m("ul",null,u()(c.a.prototype.sidebarItems().toArray()))),m("div",{className:"KosekiPage-content"},m("div",{className:"KosekiPage--categories TagTiles"},this.tags.map(function(t){return P.component({tag:t})}),this.secondary.length>=1?m("div",{class:"row"},m("div",{class:"row TagTile-info"},m("div",{class:"col-xs-8 col-lg-7"},app.translator.trans("reflar-koseki.forum.forums")),"compact"==t?m("div",null,m("div",{class:"col-xs-2 col-lg-2"},m("span",{class:"TagTile-posts"},app.translator.trans("reflar-koseki.forum.statistics")))):m("div",null,m("div",{class:"col-xs-2 col-lg-1"},m("span",{class:"TagTile-topics"},app.translator.trans("reflar-koseki.forum.topics_title"))),m("div",{class:"col-xs-2 col-lg-1"},m("span",{class:"TagTile-posts"},app.translator.trans("reflar-koseki.forum.posts_title")))),m("div",{class:"col-xs-2 col-lg-2 visible-lg"},m("span",{class:"TagTile-last"},app.translator.trans("reflar-koseki.forum.last_post"))),m("div",{class:"visible-lg col-lg-1"},m("div",{class:"TagTile-toggle"},m("i",{class:"icon fa fa-angle-down",onclick:this.toggleView})))),m("div",{class:"Category--Children TagTile"},this.secondary.map(function(t){return _.component({tag:t})}))):""),null==s||0==s?j.component():"")))},s}(r.a),U=a(2),S=a.n(U),L=a(3),V=a.n(L);app.initializers.add("reflar-koseki",function(t){t.routes.koseki={path:"/koseki",component:O.component()},V.a.prototype.commentsCount=S.a.attribute("commentsCount"),V.a.prototype.lastUser=S.a.attribute("lastUser"),V.a.prototype.hasChild=S.a.attribute("hasChild"),V.a.prototype.icon=S.a.attribute("icon")},-50)}]);
//# sourceMappingURL=forum.js.map